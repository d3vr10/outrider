# Outrider Configuration Example
# This file demonstrates all available configuration options

# OCI images to pull and transfer
images:
  # - mariadb:lts
  # - nginx:alpine
  # - php:8.3-fpm-alpine
  - php:8.3-alpine-pa
  

# Container runtime configuration
runtime:
  type: docker
  options:
    cmd: docker  # Path to docker command

# Network transport configuration
transport:
  type: ssh
  options:
    # key_file: ~/.ssh/id_rsa  # SSH private key
    user: root
    password: "sshk3yp@SS"  # Alternative: SSH password

# Remote target systems
targets:
  - host: 192.168.20.234
    port: 22

# Local and remote tar file paths
output_tar: ./images.tar
remote_tar_path: /tmp/images.tar

# Post-instruction configuration (optional)
# Choose one of the following plugin types:

# 1. K3s Air-gap Plugin (recommended for air-gapped K3s clusters)
# post_instructions:
#   plugin: k3s_airgap
#   options:
#     k3s_path: /usr/local/bin/k3s
#     containerd_path: /run/k3s/containerd/containerd.sock
#     cleanup_tar: true  # Remove tar file after import

post_instructions:
  plugin: docker
  options:
    docker_cmd: docker        # Path to docker command
    cleanup_tar: true         # Remove tar file after loading
    use_sudo: false           # Use sudo if needed

# 3. Generic SSH Plugin (for custom commands)
# post_instructions:
#   plugin: generic_ssh
#   options:
#     command: |
#       # {tar_path} will be replaced with the actual path
#       docker load < {tar_path} && rm {tar_path}

# 4. No post-instructions (just transfer files)
# post_instructions: ~
